!function(e){function t(t){for(var n,i,u=t[0],c=t[1],s=t[2],p=0,f=[];p<u.length;p++)i=u[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(l&&l(t);f.length;)f.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,u=1;u<r.length;u++){var c=r[u];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var l=c;o.push([98,1]),r()}({19:function(e,t,r){e.exports={CompletedQuiz:"CompletedQuiz__0129194",correct:"correct__3e1a590",incorrect:"incorrect__908db20",button:"button__b12cde1",result:"result__1a59116"}},27:function(e,t,r){e.exports={drawer:"drawer__5b7b229",close:"close__7ece167",active:"active__0245524"}},28:function(e,t,r){e.exports={quizCreator:"quizCreator__5124a10",count:"count__6d4f3b3",error:"error__3e60279"}},29:function(e,t,r){e.exports={ActiveQuiz:"ActiveQuiz__0f506cc",question:"question__18a34ca",options:"options__16a2a6a"}},33:function(e,t,r){e.exports={MenuToggle:"MenuToggle__91ac8f9",open:"open__375dd7e"}},36:function(e,t,r){e.exports={input:"input__5e5098a",invalid:"invalid__021780c"}},37:function(e,t,r){e.exports={button:"button__f2b942d",success:"success__660beb2",error:"error__869b12a",primary:"primary__d3b7749"}},38:function(e,t,r){e.exports={auth:"auth__4a48428",invalid:"invalid__e1639e3"}},39:function(e,t,r){e.exports={wrapper:"wrapper__bc355fe",loader:"loader__9e258ad",ripple:"ripple__6a73c20"}},40:function(e,t,r){e.exports={quizlist:"quizlist__d16839d",createQuiz:"createQuiz__3ed9300",flit:"flit__ebd957c"}},41:function(e,t,r){e.exports={item:"item__d25ce8b",correct:"correct__ed8e8fd",incorrect:"incorrect__9699e79"}},42:function(e,t,r){e.exports={Quiz:"Quiz__66602b1",wrapper:"wrapper__54ac7cd"}},55:function(e,t,r){e.exports={backdrop:"backdrop__631c0d8"}},57:function(e,t,r){e.exports={Layout:"Layout__80e8ce3"}},58:function(e,t,r){e.exports={select:"select__e305231"}},97:function(e,t,r){},98:function(e,t,r){"use strict";r.r(t);var n,a=r(0),o=r.n(a),i=r(20),u=r.n(i),c=r(11),s=r(4),l=r(31),p=r.n(l),f=r(14),d=r(54),m=r(5),v=r.n(m);!function(e){e.FETCH_START="FETCH_START",e.FETCH_QUIZ_LIST_SUCCESS="FETCH_QUIZ_LIST_SUCCESS",e.FETCH_QUIZ_SUCCESS="FETCH_QUIZ_SUCCESS",e.FETCH_ERROR="FETCH_ERROR",e.UPDATE_RESULTS="UPDATE_RESULTS",e.SHOW_RESULTS="SHOW_RESULTS",e.GOTO_NEXT_QUESTION="GOTO_NEXT_QUESTION",e.RESTART_QUIZ="RESTART_QUIZ",e.UPDATE_QUIZ="UPDATE_QUIZ",e.RESET_CREATOR="RESET_CREATOR",e.AUTH_SUCCESS="AUTH_SUCCESS",e.AUTH_SIGN_OUT="AUTH_SIGN_OUT"}(n||(n={}));var b=n;function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E={quizList:[],isLoading:!1,error:null,quiz:[],current:0,answerStatus:null,completed:!1,results:[]};var O=r(12),g=r.n(O);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w={quiz:{name:"",items:[]}};function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C={token:null};var z,j=Object(f.c)({quiz:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.FETCH_START:return y({},e,{isLoading:!0});case b.FETCH_QUIZ_LIST_SUCCESS:return y({},e,{quizList:t.quizList,isLoading:!1});case b.FETCH_QUIZ_SUCCESS:return y({},e,{quiz:t.quiz,isLoading:!1});case b.FETCH_ERROR:return y({},e,{quizList:[],isLoading:!1,error:t.error});case b.UPDATE_RESULTS:return y({},e,{answerStatus:t.answerStatus,results:t.results});case b.GOTO_NEXT_QUESTION:return y({},e,{answerStatus:null,current:t.current});case b.SHOW_RESULTS:return y({},e,{completed:!0});case b.RESTART_QUIZ:return y({},e,{current:0,answerStatus:null,completed:!1,results:[]});default:return e}},creator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.UPDATE_QUIZ:return S({},e,{quiz:{name:t.name,items:[].concat(g()(e.quiz.items),[t.item])}});case"RESET_CREATOR":return S({},e,{quiz:{items:[]}});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.AUTH_SUCCESS:return q({},e,{token:t.token});case b.AUTH_SIGN_OUT:return q({},e,{token:null});default:return e}}}),R="object"===("undefined"==typeof window?"undefined":p()(window))&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):f.d,P=Object(f.e)(j,R(Object(f.a)(d.a))),k=r(1),U=r.n(k),x=r(15),I=r(3),A=r.n(I),Q=r(9),L=r.n(Q),N=r(22),D=r.n(N);!function(e){e.APP_PREFIX="quiz-",e.SIGN_IN="signInWithPassword",e.SIGN_UP="signUp"}(z||(z={}));var F=function(e){return{type:b.AUTH_SUCCESS,token:e}},H=function(e){return function(t){setTimeout((function(){t(V())}),1e3*e)}},V=function(){var e=z.APP_PREFIX;return localStorage.removeItem("".concat(e,"IdToken")),localStorage.removeItem("".concat(e,"userId")),localStorage.removeItem("".concat(e,"expires")),{type:b.AUTH_SIGN_OUT}},M=r(23),Z=r.n(M),K=r(33),G=r.n(K),X=function(e){var t=e.toggleMenu,r=e.isOpen,n=[G.a.MenuToggle,"fa"];return r?n=[].concat(g()(n),["fa-times",G.a.open]):n.push("fa-bars"),o.a.createElement("i",{className:n.join(" "),onClick:t})};X.propTypes={toggleMenu:U.a.func.isRequired,isOpen:U.a.bool.isRequired};var W=X,J=r(55),$=r.n(J),B=function(e){var t=e.hideMenu;return o.a.createElement("div",{className:$.a.backdrop,onClick:t})};B.propTypes={hideMenu:U.a.func.isRequired};var Y=B,ee=r(27),te=r.n(ee),re=function(e){var t=e.isAuthorized,r=e.isOpen,n=e.hideMenu,a=[{to:"/",label:"Quiz List",exact:!0}];t?(a.push({to:"/creator",label:"Quiz Creator",exact:!1}),a.push({to:"/logout",label:"Log out",exact:!1})):a.push({to:"/auth",label:"Authorize",exact:!1});var i=[te.a.drawer];return r||i.push(te.a.close),o.a.createElement(o.a.Fragment,null,o.a.createElement("nav",{className:i.join(" ")},o.a.createElement("ul",null,a.map((function(e,t){return o.a.createElement("li",{key:t},o.a.createElement(c.c,{to:e.to,activeClassName:te.a.active,exact:e.exact,onClick:n},e.label))})))),r&&o.a.createElement(Y,{hideMenu:n}))};re.propTypes={isAuthorized:U.a.bool,isOpen:U.a.bool.isRequired,hideMenu:U.a.func.isRequired};var ne=re,ae=r(57),oe=r.n(ae),ie=function(e){var t=e.isAuthorized,r=e.children,n=Object(a.useState)(!1),i=Z()(n,2),u=i[0],c=i[1];return o.a.createElement("div",{className:oe.a.Layout},o.a.createElement(ne,{isOpen:u,hideMenu:function(){return c(!1)},isAuthorized:t}),o.a.createElement(W,{toggleMenu:function(){return c(!u)},isOpen:u}),o.a.createElement("main",null,r))};ie.propTypes={isAuthorized:U.a.bool};var ue=Object(s.b)((function(e){return{isAuthorized:!!e.auth.token}}))(ie),ce=r(16),se=r.n(ce),le=r(17),pe=r.n(le),fe=r(24),de=r.n(fe),me=r(25),ve=r.n(me),be=r(26),he=r.n(be);function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ee=new(function(){function e(){se()(this,e)}return pe()(e,[{key:"createControl",value:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isTouched:!1,isValid:!t,value:""},e,{validation:t})}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return!0;var r=!0;if(t.required&&(r=""!==e.trim()&&r),t.email){var n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;r=n.test(String(e).toLowerCase())&&r}if(t.name){var a=/^[ a-zA-Zа-яА-яїЇіІєЄьЬ#№]+$/;r=a.test(e.toLowerCase())&&r}return t.minLength&&(r=e.trim().length>=t.minLength&&r),r}},{key:"validateForm",value:function(e){var t=!this.hasRepeatingValues(e);for(var r in e)e.hasOwnProperty(r)&&(t=e[r].isValid&&t);return t}},{key:"hasRepeatingValues",value:function(e){var t=new Set,r=Object.keys(e).length;for(var n in e)e.hasOwnProperty(n)&&t.add(e[n].value);return r!==t.size}}]),e}()),Oe=r(36),ge=r.n(Oe),_e=function(e){var t=e.label,r=e.type,n=e.value,i=e.error,u=e.isTouched,c=e.isValid,s=e.shouldValidate,l=e.autoblur,p=e.autofocus,f=e.onChange,d=e.onKeyDown,m=e.onKeyUp,v=e.onKeyPress,b=Object(a.useRef)(null),h=r||"text",y="".concat(h,"-").concat(Math.round(1e3*Math.random())),E=[ge.a.input],O=function(){return!c&&u&&s};return O()&&E.push(ge.a.invalid),Object(a.useEffect)((function(){l&&b.current.blur(),p&&b.current.focus()}),[]),o.a.createElement("div",{className:E.join(" ")},o.a.createElement("label",{htmlFor:y},t),o.a.createElement("input",{ref:p||l?b:null,type:h,id:y,value:n,onChange:f,onKeyDown:d||null,onKeyUp:m||null,onKeyPress:v||null}),O()&&o.a.createElement("span",null,i||"Value is incorrect"))};_e.propTypes={label:U.a.string,type:U.a.string,value:U.a.string,error:U.a.string,isTouched:U.a.bool.isRequired,isValid:U.a.bool.isRequired,shouldValidate:U.a.bool.isRequired,autoblur:U.a.bool,autofocus:U.a.bool,onChange:U.a.func.isRequired,onKeyDown:U.a.func,onKeyUp:U.a.func,onKeyPress:U.a.func};var Se=_e,we=r(37),Te=r.n(we),qe=function(e){var t=e.onClick,r=e.disabled,n=e.children,a=[Te.a.button,Te.a[e.type]];return o.a.createElement("button",{className:a.join(" "),onClick:t,disabled:r},n)};qe.propTypes={onClick:U.a.func.isRequired,disabled:U.a.bool};var Ce=qe,ze=r(38),je=r.n(ze);function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ke=function(e){function t(){var e,r;se()(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=de()(this,(e=ve()(t)).call.apply(e,[this].concat(a)))).state={formControls:r.createFormControls(),isFormValid:!1,isLoginInvalid:!1},r.input=o.a.createRef(),r.handleChange=function(e,t){var n=Pe({},r.state.formControls),a=Pe({},n[t]);a.value=e,a.isTouched=!0,a.isValid=Ee.validate(a.value,a.validation),n[t]=a,r.setState({formControls:n,isLoginInvalid:!1,isFormValid:Ee.validateForm(n)})},r.handleEnterKey=function(e){"Enter"===e.key&&r.loginHandler()},r.loginHandler=L()(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={email:r.state.formControls.email.value,password:r.state.formControls.password.value,action:z.SIGN_IN},e.prev=1,e.next=4,r.props.authUser(t);case 4:e.sent.status,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r.setState({isLoginInvalid:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),r.registrationHandler=L()(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={email:r.state.formControls.email.value,password:r.state.formControls.password.value,action:z.SIGN_UP},e.prev=1,e.next=4,r.props.authUser(t);case 4:e.sent.status,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),r}return he()(t,e),pe()(t,[{key:"createFormControls",value:function(){return{email:Ee.createControl({type:"email",label:"Email",error:"Email is invalid"},{required:!0,email:!0}),password:Ee.createControl({type:"password",label:"Password",error:"Password is invalid"},{required:!0,minLength:6})}}},{key:"render",value:function(){return o.a.createElement("div",{className:je.a.auth},o.a.createElement("div",null,o.a.createElement("h1",null,"Authorize"),o.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},this.renderInputs(),o.a.createElement(Ce,{type:"success",onClick:this.loginHandler,disabled:!this.state.isFormValid},"Log in"),o.a.createElement(Ce,{type:"primary",onClick:this.registrationHandler,disabled:!this.state.isFormValid},"Register"),this.state.isLoginInvalid&&o.a.createElement("span",{className:je.a.invalid},"Incorrect email or password"))))}},{key:"renderInputs",value:function(){var e=this,t=this.state.formControls;return Object.keys(t).map((function(r,n){var a=t[r];return o.a.createElement(Se,{key:r+n,label:a.label,type:a.type,value:a.value,error:a.error,isTouched:a.isTouched,isValid:a.isValid,shouldValidate:!!a.validation,onChange:function(t){e.handleChange(t.target.value,r)},onKeyPress:e.handleEnterKey,autofocus:"email"===r})}))}}]),t}(a.Component),Ue=Object(s.b)(null,(function(e){return{authUser:function(t){return e(function(e){return function(){var t=L()(A.a.mark((function t(r){var n,a,o,i,u,c,s;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.a.post("https://identitytoolkit.googleapis.com/v1/accounts:".concat(e.action,"?key=AIzaSyBiPy_ZxHNmvqoORd_czjiS4dchO8TZR20"),{email:e.email,password:e.password,returnSecureToken:!0});case 2:if(200!==(n=t.sent).status){t.next=13;break}return a=n.data,o=a.idToken,i=a.localId,u=a.expiresIn,c=z.APP_PREFIX,s=String(new Date((new Date).getTime()+1e3*Number(u))),localStorage.setItem("".concat(c,"IdToken"),o),localStorage.setItem("".concat(c,"userId"),i),localStorage.setItem("".concat(c,"expires"),s),r(F(o)),r(H(Number(u))),t.abrupt("return",n);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(ke),xe=D.a.create({baseURL:"https://quiz-app-react-85b48.firebaseio.com/"}),Ie=r(58),Ae=r.n(Ie),Qe=function(e){var t=e.label,r=e.value,n=e.options,a=e.onChange,i="".concat(t,"-").concat(Math.round(1e3*Math.random()));return o.a.createElement("div",{className:Ae.a.select},o.a.createElement("label",{htmlFor:i},t),o.a.createElement("select",{id:i,value:r,onChange:a},n.map((function(e,t){return o.a.createElement("option",{key:e.value+t,value:e.value},e.text)}))))};Qe.propTypes={label:U.a.string,value:U.a.number.isRequired,options:U.a.array.isRequired,onChange:U.a.func.isRequired};var Le,Ne,De,Fe=Qe,He=r(28),Ve=r.n(He);function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ke=Object(x.h)((De=Ne=function(e){function t(){var e,r;se()(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=de()(this,(e=ve()(t)).call.apply(e,[this].concat(a)))).state={correct:1,formControls:r.createFormControls(),isFormValid:!1},r.handleChange=function(e,t){var n=Ze({},r.state.formControls),a=Ze({},n[t]);a.value=e,a.isTouched=!0,a.isValid=Ee.validate(a.value,a.validation),n[t]=a,r.setState({formControls:n,isFormValid:Ee.validateForm(n)})},r.handleSelect=function(e){r.setState({correct:Number(e.target.value)})},r.addQuestion=function(e){e.preventDefault();var t=r.state.formControls,n=t.question,a=t.option1,o=t.option2,i=t.option3,u=t.option4,c=t.name,s={question:n.value,id:r.props.quiz.items.length+1,correct:r.state.correct,answers:[{id:a.id,text:a.value},{id:o.id,text:o.value},{id:i.id,text:i.value},{id:u.id,text:u.value}]};r.props.updateQuiz(s,c.value),r.resetState()},r.createQuiz=function(){var e=L()(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,r.props.uploadQuiz();case 3:"OK"===e.sent.statusText&&(r.resetState(),r.props.history.push("/"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r}return he()(t,e),pe()(t,[{key:"render",value:function(){var e=this.state,t=e.correct,r=e.isFormValid,n=this.props.quiz.items;return o.a.createElement("div",{className:Ve.a.quizCreator},o.a.createElement("div",null,o.a.createElement("h1",null,"Quiz creation"),o.a.createElement("div",{className:Ve.a.count},"Questions: ",n.length),o.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},this.renderInputs(),o.a.createElement(Fe,{label:"Provide the correct answer",value:t,options:[{text:1,value:1},{text:2,value:2},{text:3,value:3},{text:4,value:4}],onChange:this.handleSelect}),o.a.createElement(Ce,{type:"primary",disabled:!r,onClick:this.addQuestion},"Add question"),o.a.createElement(Ce,{type:"success",disabled:!this.props.quiz.items.length,onClick:this.createQuiz},"Create quiz"),!r&&o.a.createElement("div",{className:Ve.a.error},"Empty or repeating fields"))))}},{key:"renderInputs",value:function(){var e=this,t=this.state.formControls;return Object.keys(t).map((function(r,n){var a=t[r];return o.a.createElement(o.a.Fragment,{key:n},o.a.createElement(Se,{label:a.label,value:a.value,error:a.error,isTouched:a.isTouched,isValid:a.isValid,shouldValidate:!!a.validation,onChange:function(t){e.handleChange(t.target.value,r)},autofocus:"question"===r}),0===n&&o.a.createElement("hr",null))}))}},{key:"createFormControls",value:function(){return{question:Ee.createControl({label:"Enter question",error:"Question is too short"},{required:!0,minLength:20}),option1:this.createOption(1),option2:this.createOption(2),option3:this.createOption(3),option4:this.createOption(4),name:Ee.createControl(Ze({},this.quizName),{required:!0,name:!0,minLength:8})}}},{key:"createOption",value:function(e){return Ee.createControl({id:e,label:"Answer ".concat(e),error:"Cannot be empty"},{required:!0})}},{key:"resetState",value:function(){this.setState({correct:1,isFormValid:!1,formControls:this.createFormControls()})}},{key:"quizName",get:function(){var e={label:"Provide the quiz name",error:"Name is too short or contains digits"};return this.state&&(e.value=this.state.formControls.name.value,e.isTouched=!0,e.isValid=!0),e}}]),t}(o.a.Component),Ne.propTypes={quiz:U.a.object.isRequired,updateQuiz:U.a.func.isRequired,uploadQuiz:U.a.func.isRequired},Le=De))||Le,Ge=Object(s.b)((function(e){return{quiz:e.creator.quiz}}),(function(e){return{updateQuiz:function(t,r){return e(function(e,t){return{type:b.UPDATE_QUIZ,item:e,name:t}}(t,r))},uploadQuiz:function(){return e(function(){var e=L()(A.a.mark((function e(t,r){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe.post("quiz.json",r().creator.quiz);case 3:return"OK"===(n=e.sent).statusText&&t({type:b.RESET_CREATOR}),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}())}}}))(Ke),Xe=function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=[e[r],e[t]];e[t]=n[0],e[r]=n[1]}return e},We=function(){return{type:b.FETCH_START}},Je=function(e){return{type:b.FETCH_QUIZ_LIST_SUCCESS,quizList:e}},$e=function(e){return{type:b.FETCH_QUIZ_SUCCESS,quiz:e}},Be=function(e,t){return{type:b.UPDATE_RESULTS,answerStatus:e,results:t}},Ye=function(e){return{type:b.GOTO_NEXT_QUESTION,current:e}},et=function(){return{type:b.SHOW_RESULTS}},tt=r(39),rt=r.n(tt);var nt=function(){return o.a.createElement("div",{className:rt.a.wrapper},o.a.createElement("div",{className:rt.a.loader},o.a.createElement("div",null),o.a.createElement("div",null)))},at=r(40),ot=r.n(at),it=function(e){var t=e.fetchQuizes,r=e.isLoading,n=e.quizList;return Object(a.useEffect)((function(){t()}),[]),o.a.createElement("div",{className:ot.a.quizlist},o.a.createElement("div",null,o.a.createElement("h1",null,"Quiz list"),r&&o.a.createElement(nt,null),!r&&o.a.createElement("ul",null,n.map((function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(c.c,{to:"/quiz/".concat(e.id)},e.name))}))),!r&&!n.length&&o.a.createElement(c.b,{to:"/creator",className:ot.a.createQuiz},"Create quiz")))};it.propTypes={isLoading:U.a.bool.isRequired,quizList:U.a.array.isRequired,fetchQuizes:U.a.func.isRequired};var ut=Object(s.b)((function(e){return{quizList:e.quiz.quizList,isLoading:e.quiz.isLoading}}),(function(e){return{fetchQuizes:function(){return e(function(){var e=L()(A.a.mark((function e(t){var r,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(We()),e.prev=1,e.next=4,xe.get("quiz.json");case 4:if(200!==(r=e.sent).status){e.next=9;break}return n=Object.entries(r.data).map((function(e){var t=Z()(e,2);return{id:t[0],name:t[1].name}})),t(Je(n)),e.abrupt("return",r);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t((a=e.t0,{type:b.FETCH_ERROR,error:a}));case 14:case"end":return e.stop()}var a}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())}}}))(it),ct=r(59),st=r.n(ct),lt=r(41),pt=r.n(lt),ft=function(e){var t=e.answer,r=e.status,n=e.onAnswerClick,a=[pt.a.item];return r&&a.push(pt.a[r]),o.a.createElement("li",{className:a.join(" "),onClick:function(){return n(t.id)}},t.text)};ft.propTypes={onAnswerClick:U.a.func.isRequired,answer:U.a.object.isRequired,status:U.a.string};var dt=ft,mt=r(29),vt=r.n(mt),bt=r(96)(),ht=function(e){var t=e.current,r=e.total,n=e.question,i=e.answers,u=e.status,c=e.onAnswerClick,s=Object(a.useRef)(null);return o.a.createElement("div",{className:vt.a.ActiveQuiz},o.a.createElement("p",{className:vt.a.question},o.a.createElement("span",null,o.a.createElement("strong",null,t,". "),n),o.a.createElement("small",null,t," / ",r)),o.a.createElement("ul",{className:vt.a.options},function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return u?u&&(e=g()(s.current)):(e=bt(Xe(t)),s.current=g()(e)),e}().map((function(e,t){return o.a.createElement(dt,{key:t,answer:e,onAnswerClick:c,status:u?u[e.id]:null})}))))};ht.propTypes={current:U.a.number.isRequired,total:U.a.number.isRequired,question:U.a.string.isRequired,answers:U.a.array.isRequired,onAnswerClick:U.a.func.isRequired,status:U.a.object};var yt=ht,Et=r(19),Ot=r.n(Et),gt=function(e){var t=e.quiz,r=e.results,n=e.restartQuiz,a=Object(x.g)();return o.a.createElement("div",{className:Ot.a.CompletedQuiz},o.a.createElement("ul",null,t.map((function(e,t){return o.a.createElement("li",{key:t},o.a.createElement("strong",null,t+1,". "),e.question,o.a.createElement("i",{className:"fa ".concat("correct"===r[t]?"fa-check ".concat(Ot.a.correct):"fa-times ".concat(Ot.a.incorrect))}))}))),o.a.createElement("p",{className:Ot.a.result},"You scored ",o.a.createElement("b",null,(r.filter((function(e){return"correct"===e})).length/t.length*100).toFixed(2),"%")),o.a.createElement(Ce,{onClick:n,type:"success"},"Try again"),o.a.createElement(Ce,{onClick:function(){return a.push("/")},type:"primary"},"Quiz list"))};gt.propTypes={quiz:U.a.array.isRequired,results:U.a.array.isRequired,restartQuiz:U.a.func};var _t=gt,St=r(42),wt=r.n(St),Tt=function(e){var t=e.isLoading,r=e.quiz,n=e.current,i=e.answerStatus,u=e.completed,c=e.results,s=e.fetchQuiz,l=e.onAnswerClick,p=e.restartQuiz,f=st()(e,["isLoading","quiz","current","answerStatus","completed","results","fetchQuiz","onAnswerClick","restartQuiz"]);return Object(a.useEffect)((function(){return s(f.match.params.id),function(){p()}}),[]),o.a.createElement("div",{className:wt.a.Quiz},o.a.createElement("div",{className:wt.a.wrapper},o.a.createElement("h1",null,"Quiz"),t&&o.a.createElement(nt,null),!t&&!u&&r.length&&o.a.createElement(yt,{current:n+1,total:r.length,question:r[n].question,answers:r[n].answers,onAnswerClick:l,status:i}),!t&&u&&o.a.createElement(_t,{quiz:r,results:c,restartQuiz:p})))};Tt.propTypes={isLoading:U.a.bool.isRequired,quiz:U.a.array.isRequired,current:U.a.number.isRequired,answerStatus:U.a.object,completed:U.a.bool.isRequired,results:U.a.array.isRequired,fetchQuiz:U.a.func.isRequired,onAnswerClick:U.a.func.isRequired,restartQuiz:U.a.func.isRequired};var qt=Object(s.b)((function(e){return{isLoading:e.quiz.isLoading,quiz:e.quiz.quiz,current:e.quiz.current,answerStatus:e.quiz.answerStatus,completed:e.quiz.completed,results:e.quiz.results}}),(function(e){return{fetchQuiz:function(t){return e(function(e){return function(){var t=L()(A.a.mark((function t(r){var n,a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(We()),t.prev=1,t.next=4,xe.get("quiz/".concat(e,".json"));case 4:if(200!==(n=t.sent).status){t.next=9;break}return a=Xe(n.data.items),r($e(a)),t.abrupt("return",n);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))},onAnswerClick:function(t){return e(function(e){return function(t,r){var n=r().quiz,a=window.setTimeout((function(){if(n.current+1===n.quiz.length)t(et());else if(n.answerStatus){var e=Object.keys(n.answerStatus)[0];if("correct"===n.answerStatus[e])return}else t(Ye(n.current+1));window.clearTimeout(a)}),750);n.quiz[n.current].correct===e?t(Be(v()({},e,"correct"),[].concat(g()(n.results),["correct"]))):t(Be(v()({},e,"incorrect"),[].concat(g()(n.results),["incorrect"])))}}(t))},restartQuiz:function(){return e({type:b.RESTART_QUIZ})}}}))(Tt),Ct=function(e){var t=e.logOut;return Object(a.useEffect)((function(){t()}),[]),o.a.createElement(x.a,{to:"/"})};Ct.propTypes={logOut:U.a.func.isRequired};var zt=Object(s.b)(null,(function(e){return{logOut:function(){return e(V())}}}))(Ct),jt=function(e){var t=e.isAuthorized,r=e.autoLogin;return Object(a.useEffect)((function(){r()}),[]),o.a.createElement(ue,null,o.a.createElement(x.d,null,!t&&o.a.createElement(x.b,{path:"/auth",component:Ue}),t&&o.a.createElement(x.b,{path:"/creator",component:Ge}),o.a.createElement(x.b,{path:"/quiz/:id",component:qt}),o.a.createElement(x.b,{path:"/",component:ut,exact:!0}),t&&o.a.createElement(x.b,{path:"/logout",component:zt}),o.a.createElement(x.a,{to:"/"})))};jt.propTypes={isAuthorized:U.a.bool.isRequired,autoLogin:U.a.func.isRequired};var Rt=Object(x.h)(Object(s.b)((function(e){return{isAuthorized:!!e.auth.token}}),(function(e){return{autoLogin:function(){return e((function(e){var t=z.APP_PREFIX,r=localStorage.getItem("".concat(t,"IdToken"));if(r){var n=new Date(localStorage.getItem("".concat(t,"expires")));n<=new Date?e(V()):(e(F(r)),e(H((Number(n.getTime())-(new Date).getTime())/1e3)))}else e(V())}))}}}))(jt)),Pt=(r(97),o.a.createElement(s.a,{store:P},o.a.createElement(c.a,null,o.a.createElement(Rt,null))));u.a.render(Pt,document.querySelector("#root"))}});